[build]
  # Base directory for the build (root of monorepo)
  base = "."
  
  # Install command - ensures workspace dependencies are installed
  # Netlify will run this before the build command
  # For monorepos, we need to install at root to set up workspaces
  # Using npm ci for faster, reliable installs (falls back to npm install if needed)
  install = "npm ci || npm install"
  
  # Build command for monorepo:
  # 1. Prisma generate (creates Prisma Client)
  # 2. Next.js build
  command = "cd apps/web && npm run build"
  
  # Publish directory (Next.js output)
  publish = "apps/web/.next"

[build.environment]
  # Node version
  NODE_VERSION = "20"
  
  # Ensure DATABASE_URL is set in Netlify environment variables
  # This should be configured in Netlify dashboard under Site settings > Environment variables

